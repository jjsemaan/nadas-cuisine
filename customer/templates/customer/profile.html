{% extends 'customer/base.html' %}
{% load static %}

{% load crispy_forms_tags %}

{% block content %}
<!-- Begin Page Content -->
<div class="container-fluid">
  <!-- Main Content Here -->
  <div class="row justify-content-center">
    <div class="card o-hidden border-0 shadow-lg my-5 col-lg-5">
      <div class="card-body text-center">
        <h2>{{ user.first_name }} {{ user.last_name }}</h2>
        <p><span class="font-weight-bold">User Name:</span> {{ user.username }}</p>
        <p><span class="font-weight-bold">Email:</span> {{ user.email }}</p>
        <p><span class="font-weight-bold">Phone Number:</span> {{ user.profile.phone_number }}</p>
        <p><span class="font-weight-bold">Last Login:</span> {{ user.last_login }}</p>
        <a href="{% url 'profile_update' %}" class="btn btn-sm btn-dark shadow-sm">Update Profile</a>
      </div>
      <div>
        <h2>Order History</h2>
        {% if orders %}
        <ul>
          {% for order in orders %}
          <li>
            Order ID: {{ order.id }} <br>
            Total Price: {{ order.price }} <br>
            Delivery Date: {{ order.delivery_date }} <br>
            Items:
            <ul>
              {% for item in order.items.all %}
              <li>{{ item.name }} - ${{ item.price }}</li>
              {% endfor %}
            </ul>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>You have no previous orders.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>


{% endblock content %}